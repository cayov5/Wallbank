const cpf=document.getElementById("cpf"),whatsapp=document.getElementById("whatsapp"),email=document.getElementById("email");let showMenu=!0;const estado=document.getElementById("estado"),cidade=document.getElementById("cidade"),form=document.getElementById("form-preregister"),alertbox=document.getElementById("alert"),congratz=document.getElementById("congratz"),preregister=document.getElementById("preregister"),done=document.getElementById("done"),titleh1=document.getElementById("titleh1"),api="https://br-cidade-estado-nodejs.glitch.me";let emailOptions={mask:/^\S*@?\S*$/},whatsappOptions={mask:"(00) 0 0000 0000"},cpfOptions={mask:"000.000.000-00"},cpfMask=IMask(cpf,cpfOptions),emailMask=IMask(email,emailOptions),whatsappMask=IMask(whatsapp,whatsappOptions);window.onscroll=function(){stickHeader()};const header=document.getElementById("main-header");let sticky=header.offsetTop;function stickHeader(){window.pageYOffset>sticky?(header.classList.add("sticky"),preregister.classList.add("sticky-header")):(header.classList.remove("sticky"),preregister.classList.remove("sticky-header"))}const doListCidade=()=>{if(!estado.value)return null;cidade.length=0,fetch(api+"/estados/"+estado.value+"/cidades").then((function(e){200===e.status?e.json().then((function(e){let t;for(let o=0;o<e.length;o++)t=document.createElement("option"),t.text=e[o].cidade,t.value=e[o].cidade,cidade.add(t)})):console.warn("Looks like there was a problem. Status Code: "+e.status)})).catch((function(e){console.error("Fetch Error -",e),alert("Erro ao se comunicar, verifique sua conexão com a internet.")}))};async function doSubmit(e){await fetch("/src/app/Controllers/DoRegister.php",{method:"POST",body:e}).then((function(t){if(!t.ok)throw Error(t.statusText);t.json().then((function(t){switch(t.Status){case 1:preregister.style.display="none",done.removeAttribute("style"),nome=e.get("name"),window.scrollTo(0,0),congratz.innerHTML="Parabéns, "+nome+". Seu cadastro foi efetuado com sucesso.";break;case 2:form.reset(),alertbox.removeAttribute("style"),window.scrollTo(0,0);break;default:alert("Erro ao se comunicar, verifique sua conexão com a internet.")}}))})).catch((function(e){console.error("Fetch Error -",e)}))}estado.addEventListener("change",e=>{doListCidade()}),fetch(api+"/estados").then((function(e){200===e.status?e.json().then((function(e){let t;for(let o=0;o<e.length;o++)t=document.createElement("option"),t.text=e[o].estado,t.value=e[o].id,estado.add(t)})):console.warn("Looks like there was a problem. Status Code: "+e.status)})),form.addEventListener&&form.addEventListener("submit",(function(e){e.preventDefault();doSubmit(new FormData(form))}),!0);